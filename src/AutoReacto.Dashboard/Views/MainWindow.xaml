<Window x:Class="AutoReacto.Dashboard.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:AutoReacto.Dashboard.Localization"
        xmlns:controls="clr-namespace:AutoReacto.Dashboard.Controls"
        mc:Ignorable="d"
        Title="AutoReacto Dashboard" 
        Height="700" Width="1100"
        MinHeight="600" MinWidth="900"
        WindowStartupLocation="CenterScreen"
        Background="#313338"
        Foreground="White"
        FontFamily="Segoe UI"
        FontSize="14"
        DataContext="{x:Static local:LocalizationManager.Instance}">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="240"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Toast Notification Overlay -->
        <controls:ToastNotification x:Name="Toast" 
                                    Grid.ColumnSpan="2"
                                    Panel.ZIndex="1000"
                                    VerticalAlignment="Top"
                                    HorizontalAlignment="Center"/>

        <!-- Sidebar -->
        <Border Grid.Column="0" Background="{StaticResource DiscordSidebarBrush}">
            <DockPanel>
                <!-- Header with Logo -->
                <Border DockPanel.Dock="Top" Padding="16" Background="{StaticResource DiscordDarkerBrush}">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Image x:Name="LogoImage" 
                                   Width="32" Height="32" 
                                   Margin="0,0,10,0"
                                   VerticalAlignment="Center"/>
                            <StackPanel VerticalAlignment="Center">
                                <TextBlock Text="{Binding Strings.AppTitle}" 
                                           FontSize="18" 
                                           FontWeight="Bold" 
                                           Foreground="{StaticResource DiscordTextBrush}"/>
                                <TextBlock Text="{Binding Strings.DashboardVersion}" 
                                           FontSize="11" 
                                           Foreground="{StaticResource DiscordTextMutedBrush}"/>
                            </StackPanel>
                        </StackPanel>
                        
                        <!-- Language Switcher -->
                        <Button x:Name="LanguageButton" 
                                Content="ðŸŒ English" 
                                Style="{StaticResource DiscordSecondaryButtonStyle}"
                                Padding="8,6"
                                FontSize="11"
                                Margin="0,10,0,0"
                                HorizontalAlignment="Left"
                                Click="LanguageButton_Click"/>
                    </StackPanel>
                </Border>

                <!-- Bot Status Card -->
                <Border DockPanel.Dock="Top" Margin="12,12,12,0" Padding="12" CornerRadius="8" Background="{StaticResource DiscordDarkBrush}">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Ellipse x:Name="StatusIndicator" Width="10" Height="10" Fill="{StaticResource DiscordRedBrush}" Margin="0,0,8,0"/>
                            <TextBlock x:Name="StatusText" Text="{Binding Strings.Offline}" Foreground="{StaticResource DiscordTextMutedBrush}" FontSize="13"/>
                        </StackPanel>
                        <TextBlock x:Name="BotNameText" Text="{Binding Strings.NotConnected}" 
                                   Foreground="{StaticResource DiscordTextBrush}" 
                                   FontWeight="SemiBold"
                                   FontSize="14"
                                   Margin="0,6,0,0"/>
                        
                        <StackPanel Orientation="Horizontal" Margin="0,12,0,0">
                            <Button x:Name="StartButton" Content="{Binding Strings.Start}" 
                                    Style="{StaticResource DiscordSuccessButtonStyle}"
                                    Padding="12,8"
                                    FontSize="12"
                                    Margin="0,0,8,0"
                                    Click="StartButton_Click"/>
                            <Button x:Name="StopButton" Content="{Binding Strings.Stop}" 
                                    Style="{StaticResource DiscordDangerButtonStyle}"
                                    Padding="12,8"
                                    FontSize="12"
                                    IsEnabled="False"
                                    Click="StopButton_Click"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Navigation -->
                <StackPanel DockPanel.Dock="Top" Margin="12,16,12,0">
                    <TextBlock Text="{Binding Strings.Menu}" Style="{StaticResource DiscordSectionHeaderStyle}" Margin="4,0,0,8"/>
                    
                    <ListBox x:Name="NavigationList" 
                             Style="{StaticResource DiscordListBoxStyle}"
                             ItemContainerStyle="{StaticResource DiscordListBoxItemStyle}"
                             Background="Transparent"
                             BorderThickness="0"
                             SelectedIndex="0"
                             SelectionChanged="NavigationList_SelectionChanged">
                        <ListBoxItem x:Name="NavGeneral" Content="{Binding Strings.GeneralSettings}" Tag="General"/>
                        <ListBoxItem x:Name="NavRules" Content="{Binding Strings.ReactionRules}" Tag="Rules"/>
                        <ListBoxItem x:Name="NavLogs" Content="{Binding Strings.Logs}" Tag="Logs"/>
                    </ListBox>
                </StackPanel>

                <!-- Footer -->
                <Border DockPanel.Dock="Bottom" Padding="16" Background="{StaticResource DiscordDarkBrush}">
                    <StackPanel>
                        <Button Content="{Binding Strings.SaveChanges}" 
                                Style="{StaticResource DiscordButtonStyle}"
                                Click="SaveConfig_Click"/>
                        <TextBlock x:Name="SaveStatusText" 
                                   Text="" 
                                   FontSize="11" 
                                   Foreground="{StaticResource DiscordGreenBrush}"
                                   HorizontalAlignment="Center"
                                   Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>

                <Border/>
            </DockPanel>
        </Border>

        <!-- Main Content Area -->
        <Border Grid.Column="1" Background="{StaticResource DiscordChannelBrush}">
            <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="24">
                <Frame x:Name="MainFrame" NavigationUIVisibility="Hidden"/>
            </ScrollViewer>
        </Border>
        
        <!-- Confirm Dialog Overlay -->
        <controls:ConfirmDialog x:Name="ConfirmDialogControl" 
                                Grid.ColumnSpan="2"
                                Panel.ZIndex="1001"/>
    </Grid>
</Window>
